
<!DOCTYPE html>
<html>
<head>
    <title>articles 6151635869843</title>
    <meta name="robots" content="noindex">
</head>
<body>
    <pre>{
  "article": {
    "id": 6151635869843,
    "url": "https://Criscras13.github.io/KB_Transformer/api/v2/help_center/en-us/articles/6151635869843.json",
    "html_url": "https://Criscras13.github.io/KB_Transformer/api/v2/help_center/en-us/articles/6151635869843.html",
    "author_id": 1508130948062,
    "comments_disabled": true,
    "draft": false,
    "promoted": false,
    "position": 2,
    "vote_sum": 2,
    "vote_count": 8,
    "section_id": 26411014901779,
    "created_at": "2022-05-11T13:56:18Z",
    "updated_at": "2025-08-11T16:25:16Z",
    "name": "Active Directory Integration (ADI) Advanced Configuration Guide",
    "title": "Active Directory Integration (ADI) Advanced Configuration Guide",
    "source_locale": "en-us",
    "locale": "en-us",
    "outdated": false,
    "outdated_locales": [],
    "edited_at": "2025-07-29T17:37:34Z",
    "user_segment_id": null,
    "permission_group_id": 195648,
    "content_tag_ids": [],
    "label_names": [
      "adi",
      "localized",
      "answerbot",
      "#userprovisioning",
      "answerbot_kmsat"
    ],
    "body": "<p>After your initial Active Directory (AD) configuration, you can customize your sync with additional options to meet your organization's needs. For more information, see the sections below. For information about the basic Active Directory Integration (ADI) installation and configuration process, see our <a href='https://support.knowbe4.com/hc/en-us/articles/228373888'>Active Directory Integration (ADI) Configuration Guide</a>.</p>\n<h2 id='h_01HQNNGRBA2W1JJ7813SS2VK3R'>Creating an ADI Service Account in Active Directory</h2>\n<p>To set up ADI, you must use or create an account in AD that has the following permissions:</p>\n<ul>\n<li><strong>read all user information</strong></li>\n<li><strong>read all inetOrgPerson information</strong></li>\n</ul>\n<p>To create an AD User with necessary read permissions, follow the steps below:</p>\n<ol>\n<li>Open <strong>Active Directory Users and Computers</strong>.</li>\n<li>Right-click on your domain and select <strong>Delegate Control</strong>. When you select <strong>Delegate Control</strong>, the <strong>Delegation of Control</strong> modal will open.\n<p><a data-fancybox='single' data-src='https://helpimg.s3.amazonaws.com/ADI/adi_delegatecontrol.png'><img src='https://helpimg.s3.amazonaws.com/ADI/adi_delegatecontrol.png' alt=' '></a></p>\n</li>\n<li>In the <strong>Delegation of Control</strong> modal, add your previously created ADI Service account.\n<p><a data-fancybox='single' data-src='http://helpimg.s3.amazonaws.com/FAQ/ADSA_02.png'><img src='http://helpimg.s3.amazonaws.com/FAQ/ADSA_02.png' alt=' '></a></p>\n</li>\n<li>Delegate the <strong>Read all user information</strong> task and the <strong>Read all inetOrgPerson information</strong> task.\n<p><a data-fancybox='single' data-src='http://helpimg.s3.amazonaws.com/FAQ/ADSA_03.png'><img src='http://helpimg.s3.amazonaws.com/FAQ/ADSA_03.png' alt=' '></a></p>\n</li>\n<li>Lastly, you will need to reconfigure your KnowBe4 ADI Sync Service to use your new AD service account with ADI.</li>\n</ol>\n<p>To change the specified user, follow the steps below:</p>\n<ol>\n<li>Navigate to your <strong>C:\\ProgramData\\KnowBe4\\ADI Sync\\Config\\</strong> folder and delete the <strong>&lt;domain&gt;.dat</strong> file.</li>\n<li>Open the command prompt as an administrator and navigate to your <strong>C:\\Program Files\\KnowBe4\\ADI Sync\\</strong> folder, then type \u201cadisync.exe config\u201d.</li>\n</ol>\n<h2 id='h_01HQNNGRBBAQ782REXJ6H17ARZ'>Changing Where to Pull Email Addresses from in Active Directory</h2>\n<p>By default, the ADI sync will sync all proxy email addresses for your users. However, you can change where you would like to pull email addresses from in Active Directory. Additionally, you can choose to only sync users\u2019 primary proxy email addresses. Open your <strong>adisync.conf</strong> file from within your <strong>C:\\ProgramData\\KnowBe4\\ADI Sync\\Config</strong> folder. By default, you will see the following fields:</p>\n<ul>\n<li><strong>emailAttribute = \"proxyAddresses\"</strong></li>\n<li><strong>primaryProxyOnly = false</strong></li>\n</ul>\n<div class='callout-note'>\n<div class='callout__content'>\n<strong>Note: </strong>If you do <em>not</em> see these fields, make sure that you are editing the <strong>adisync.conf</strong> file and not the <strong>&lt;domain&gt;.conf</strong> file. If you do not see the <strong>emailAttribute</strong> field in your <strong>adisync.conf</strong> file, you may be using an older version of ADI. If you need to make changes to the <strong>emailAttribute</strong> field, <a href='#h_01HQNNGRBB64BBD25WB1RB46XH'>upgrade to the latest version of ADI</a>.</div>\n</div>\n<p>For more information about changing which email addresses sync for your users, see the list below:</p>\n<div class='callout-note'>\n<div class='callout__content'>\n<strong>Note: </strong>The following fields are case-sensitive.</div>\n</div>\n<ul>\n<li>\n<strong>Primary Proxy Only</strong>: If you would like to only use the primary proxy address for each user, change the <strong>primaryProxyOnly</strong> field from \"false\" to \"true\". Save the <strong>adisync.conf</strong> file, then start the ADI service again. This process will ensure that no alias email addresses are synced.</li>\n<li>\n<strong>Mail Attribute</strong>: If you would like the sync to use the <strong>Mail</strong> attribute instead of <strong>proxyAddresses</strong>, change the <strong>emailAttribute</strong> field to \"mail\" from \"proxyAddresses\". Save the <strong>adisync.conf</strong> file and start the <strong>KnowBe4 ADI Sync Service</strong> again.\n<div class='callout-remember'>\n<div class='callout__content'>\n<strong>Important:</strong>Regardless of which field you are syncing by, the mail attribute for a user cannot be empty. For the purposes of ADI, this value does not need to be a valid domain. For more information, contact our support team.</div>\n</div>\n</li>\n<li>\n<strong>User Principal Name</strong>: If you would like the sync to use the userPrincipalName (UPN) instead of proxyAddresses, change the <strong>emailAttribute</strong> field from \"proxyAddresses\" to \"userPrincipalName\". Save the <strong>adisync.conf</strong> file and start the <strong>KnowBe4 ADI Sync Service</strong> again.</li>\n</ul>\n<h3 id='h_01HQNNGRBBJ7DRM00J01QDH6YH'>Viewing Mail and Proxy Addresses in Active Directory</h3>\n<p>Follow the steps below to view a user\u2019s mail and proxy address in Active Directory. You can also use these steps to view a user\u2019s PrincipalName.</p>\n<ol>\n<li>In the <strong>Active Directory Users and Computers</strong> window, click <strong>View</strong> from the toolbar.</li>\n<li>From the <strong>View</strong> drop-down menu, select <strong>Advanced Features</strong>.\n<p><a data-fancybox='single' data-src='https://helpimg.s3.amazonaws.com/ADI/adiproxy_a.png'><img src='https://helpimg.s3.amazonaws.com/ADI/adiproxy_a.png' alt=' '></a></p>\n</li>\n<li>Double-click on a user to open the <strong>User Properties</strong> pop-up window.</li>\n<li>In the <strong>User Properties</strong> pop-up window, select the <strong>Attribute Editor</strong> tab.</li>\n<li>To view the user's mail address, search the <strong>Attribute</strong> column for mail. Select <strong>mail</strong>, then click the <strong>Edit</strong> button.\n<p><a data-fancybox='single' data-src='https://helpimg.s3.amazonaws.com/ADI/adiproxy_1.png'><img src='https://helpimg.s3.amazonaws.com/ADI/adiproxy_1.png' alt=' '></a></p>\n</li>\n<li>When you click <strong>Edit</strong>, the <strong>String Attribute Editor</strong> pop-up window will open. From this pop-up window, you can adjust the <strong>Value</strong> of the <strong>mail</strong> attribute.\n<p><a data-fancybox='single' data-src='https://helpimg.s3.amazonaws.com/ADI/adiproxy_2.png'><img src='https://helpimg.s3.amazonaws.com/ADI/adiproxy_2.png' alt=' '></a></p>\n</li>\n<li>To view the user's proxy address, search the <strong>Attribute</strong> column for <strong>proxyAddresses</strong>. Select <strong>proxyAddresses</strong>, then click the <strong>Edit</strong> button.\n<p><a data-fancybox='single' data-src='https://helpimg.s3.amazonaws.com/ADI/adiproxy_3.png'><img src='https://helpimg.s3.amazonaws.com/ADI/adiproxy_3.png' alt=' '></a></p>\n</li>\n<li>When you click the <strong>Edit</strong> button, the <strong>Multi-valued String Editor</strong> pop-up window will open. Here, you can add or remove a <strong>Value</strong> to the <strong>proxyAddresses</strong> attribute.\n<p><a data-fancybox='single' data-src='https://helpimg.s3.amazonaws.com/ADI/adiproxy_4.png'><img src='https://helpimg.s3.amazonaws.com/ADI/adiproxy_4.png' alt=' '></a></p>\n</li>\n</ol>\n<h2 id='h_01HQNNGRBBT031SPXPVFR6S0J1'>Support for Multiple Domain Sources</h2>\n<p>If your users are split between multiple domain sources, you will need to set up a configuration for each domain with user objects that need to be synchronized.</p>\n<p>For each additional domain, you will need to run the <strong>adisync.exe</strong> config in your ADI sync installation directory. Running the ADI sync configuration a second time will create the additional <strong>&lt;domain&gt;.conf</strong> files that should be edited in order to specify the filter criteria for your sync.</p>\n<div class='callout-note'>\n<div class='callout__content'>\n<strong>Note: </strong>To enable multiple source domain support, make sure that you have already installed the ADI sync tool once. You do not need to install the ADI sync tool again, as a second installation may archive your users.</div>\n</div>\n<p>To run ADI sync configuration for multiple source domain support, follow the steps below:</p>\n<ol>\n<li>Open the command prompt in administrator mode.</li>\n<li>Navigate to the ADI Sync system directory. The system directory's default location is <strong>C:\\Program Files\\KnowBe4\\ADI Sync</strong>.</li>\n<li>Type the line below, and then press the Enter key:<br>\n<div class='code-block'>\n<button class='copy-btn' data-target='text1'>Copy</button>\n<div id='text1'>\n<pre>adisync.exe config</pre>\n</div>\n</div>\n</li>\n<li>Enter the details for your additional domain controller and domain. For more details, see step 7 in the <a href='https://support.knowbe4.com/hc/en-us/articles/228373888#INSTALL'>Installation and Configuration</a> section of our <a href='https://support.knowbe4.com/hc/en-us/articles/228373888'>Active Directory Integration (ADI) Configuration Guide</a>.</li>\n<li>Once the additional <strong>&lt;domain&gt;.conf</strong> file has been created in <strong>C:\\ProgramData\\KnowBe4\\ADI Sync\\Config</strong>, edit the file to specify the information that you would like to sync. For more details, see our <a href='https://support.knowbe4.com/hc/en-us/articles/228373888'>Active Directory Integration (ADI) Configuration Guide</a>.</li>\n<li>Save the <strong>&lt;domain&gt;.conf</strong> file.</li>\n<li>After repeating this process for all of your additional domains, you can start your synchronization.</li>\n</ol>\n<div class='callout-note'>\n<div class='callout__content'>\n<strong>Note: </strong>The system where you install the ADI sync tool must be able to connect to each domain controller.</div>\n</div>\n<h2 id='h_01HQNNGRBB64BBD25WB1RB46XH'>Installing the Newest Version of ADI</h2>\n<p>Follow the steps below to install the newest version of ADI without uninstalling your previous version:</p>\n<ol>\n<li>Download the new installer from your KSAT <strong>Account Settings</strong>.</li>\n<li>Run the installation.</li>\n<li>If asked, click <strong>Yes</strong> to use the data from the previous installation.<br>The <strong>KnowBe4 ADI Sync Service</strong> will start automatically once the installation is completed. You can verify that the service is running as expected in the Windows services menu.</li>\n</ol>\n<p>Your users should continue to sync as expected.</p>\n<h2 id='h_01HQNNGRBB09720XN1FYPRX7R4'>Syncing Custom Fields</h2>\n<p>The user profiles in your KnowBe4 console include custom fields that you can use to sync additional information from your Active Directory. To specify the information that you want to sync to the custom fields, edit the <strong>&lt;domain&gt;.conf</strong> file and then <a href='https://support.knowbe4.com/hc/en-us/articles/228373888#SYNC'>start the service</a>again for your changes to sync. To learn more, see <a href='https://support.knowbe4.com/hc/en-us/articles/360015798533#SYNCFIELDS'>Syncing Other User Information to KnowBe4</a>.</p>\n<p><a data-fancybox='single' data-src='https://helpimg.s3.amazonaws.com/ADI/KMSATuserprofile-CustomFields.png'><img src='https://helpimg.s3.amazonaws.com/ADI/KMSATuserprofile-CustomFields.png' alt=' '></a></p>\n<div class='callout-note'>\n<div class='callout__content'>\n<strong>Note: </strong>The custom sync fields are available with ADI version 1.0.16.5 and later. If you do not see the custom fields in your <strong>&lt;domain&gt;.conf</strong> file, you will need to install the newest version of ADI. Your existing <strong>&lt;domain&gt;.conf</strong> file or files will be updated to include the custom sync fields. If you decide to use these new custom fields, you must start the <strong>KnowBe4 ADI Sync Service</strong> again for your changes to sync.</div>\n</div>\n<h2 id='h_01GV5YKK2BT4HNCEFV8A6APREX'>Enabling SecurityCoach Fields</h2>\n<p>If you've already configured ADI and your subscription includes SecurityCoach, you can enable the <a href='https://support.knowbe4.com/hc/en-us/articles/360015798533#SECURITY_COACH'>SecurityCoach fields</a> by <a href='#h_01HQNNGRBB64BBD25WB1RB46XH'>installing the newest version</a> of ADI. If you're already using the latest version and you don't have the SecurityCoach fields enabled, you'll need to reconfigure ADI to enable these fields.</p>\n<div class='callout-note'>\n<div class='callout__content'>\n<strong>Note: </strong>If you're installing the newest version of ADI, make sure to set the <strong>Enable SecurityCoach Fields</strong> to <strong>true</strong>. For more information, see the <a href='https://support.knowbe4.com/hc/en-us/articles/228373888#INSTALL'>Installation and Configuration</a> section of our <a href='https://support.knowbe4.com/hc/en-us/articles/228373888'>Active Directory Integration (ADI) Configuration Guide</a>.</div>\n</div>\n<p>To reconfigure ADI and enable the SecurityCoach fields, follow the steps below:</p>\n<ol>\n<li>Stop the <strong>KnowBe4 ADI Sync Service</strong> in the Windows services menu.</li>\n<li>Navigate to the <strong>\\ADIsync</strong> system directory. The system directory's default location is <strong>C:\\ProgramData\\KnowBe4\\ADI Sync\\Config\\</strong>.</li>\n<li>Rename your <strong>&lt;domain&gt;.conf </strong>file to \"&lt;domain&gt;-OLD.conf\".</li>\n<li>Move the <strong>&lt;domain&gt;-OLD.conf</strong> file to a different directory.</li>\n<li>Navigate to the installation directory <strong>C:\\Program Files\\KnowBe4\\ADI Sync\\</strong> and open an elevated command prompt.</li>\n<li>In the command prompt, run <strong>adisync.exe config</strong>.</li>\n<li>\n<a href='https://support.knowbe4.com/hc/en-us/articles/228373888#INSTALL'>Reconfigure ADI</a> by entering the same information you entered previously, but set <strong>Enable SecurityCoach fields</strong> to <strong>true</strong>. Once you reconfigure ADI, a new <strong>&lt;domain&gt;.conf</strong> file will populate in the <strong>\\Config </strong>directory.</li>\n<li>Open the <strong>&lt;domain&gt;-OLD.conf</strong> file and the new <strong>&lt;domain&gt;.conf</strong> file.</li>\n<li>Copy the data in the <strong>[sync.users]</strong> section of the <strong>&lt;domain&gt;-OLD.conf</strong> file. Paste this data into the new <strong>&lt;domain&gt;.conf</strong> file.</li>\n<li>Copy the data in the <strong>[sync.groups] </strong>section of the <strong>&lt;domain&gt;-OLD.conf</strong> file. Paste this data into the new <strong>&lt;domain&gt;.conf</strong> file.</li>\n<li>(Optional) If you customized the <strong>[sync.fields]</strong> section of the <strong>&lt;domain&gt;-OLD.conf</strong> file, you can make the same customizations to the new <strong>&lt;domain&gt;.conf</strong> file.</li>\n<li>Start the <strong>KnowBe4 ADI Sync Service</strong>.</li>\n</ol>",
    "user_segment_ids": [],
    "source_url": "https://support.knowbe4.com/hc/en-us/articles/6151635869843-Active-Directory-Integration-ADI-Advanced-Configuration-Guide"
  }
}</pre>
</body>
</html>
