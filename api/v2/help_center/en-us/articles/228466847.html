
<!DOCTYPE html>
<html>
<head>
    <title>articles 228466847</title>
    <meta name="robots" content="noindex">
</head>
<body>
    <pre>{
  "article": {
    "id": 228466847,
    "url": "https://Criscras13.github.io/KB_Transformer/api/v2/help_center/en-us/articles/228466847.json",
    "html_url": "https://Criscras13.github.io/KB_Transformer/api/v2/help_center/en-us/articles/228466847.html",
    "author_id": 1507801285842,
    "comments_disabled": true,
    "draft": false,
    "promoted": false,
    "position": 5,
    "vote_sum": 10,
    "vote_count": 16,
    "section_id": 26411014901779,
    "created_at": "2016-09-30T12:58:28Z",
    "updated_at": "2025-10-15T20:08:56Z",
    "name": "FAQ: Active Directory Integration (ADI)",
    "title": "FAQ: Active Directory Integration (ADI)",
    "source_locale": "en-us",
    "locale": "en-us",
    "outdated": false,
    "outdated_locales": [],
    "edited_at": "2025-10-15T20:08:55Z",
    "user_segment_id": null,
    "permission_group_id": 195648,
    "content_tag_ids": [],
    "label_names": [
      "faq",
      "ad",
      "adi",
      "ad sync",
      "active directory",
      "sync",
      "show group domain",
      "ldap",
      "ldaps",
      "test mode",
      "sync groups",
      "sync users",
      "users not syncing",
      "multiple domains",
      "sync multiple domains",
      "privacy",
      "data protection",
      "ad manage",
      "ad managed",
      "ad-managed",
      "active directory integration",
      "answerbot",
      "answerbot_kmsat",
      "answerbot_ksat"
    ],
    "body": "<p>In this article, you can find frequently asked questions about using Active Directory Integration (ADI) to integrate your Active Directory (AD) with your KSAT account. If you have additional questions that this article does not include, please submit a ticket to our <a href='https://support.knowbe4.com/hc/en-us/requests/new'>support team</a>.</p>\n<p>To learn more about using ADI to integrate your AD account with KSAT, see our <a href='https://support.knowbe4.com/hc/en-us/articles/228373888'>Active Directory Integration (ADI) Configuration Guide</a>.</p>\n<h2 id='h_01HFFDRG4GMNJ6VS9G89X5RGV1'>General Information</h2>\n<p>For general information about ADI, see the questions below:</p>\n<ol>\n<li><a href='#h_01HVM271VCS807FMA48QFSG94K'>What is the advantage of integrating Active Directory with my KSAT account?</a></li>\n<li><a href='#h_01HVM277B9GA7Y19J24FDGZPKG'>Can I use ADI if I'm using Microsoft Azure?</a></li>\n<li><a href='#h_01HVM27GYV5D41RHWTFJT7AAJH'>How do I change the initial login credentials that were used to set up ADI for my organization?</a></li>\n<li><a href='#h_01HVM27Y3KXRJSJQ7YMEQ9RCYK'>Will my existing phishing and training campaigns be impacted when I turn on ADI?</a></li>\n<li><a href='#h_01HVM28RJ1W5H32STS3W4H5GFQ'>If I make changes to my KSAT account, will any changes happen in my Active Directory?</a></li>\n<li><a href='#h_01HVM28Z3EBXXHNR17KAQVS196'>If I have multiple domains in my AD account and I'm importing users into my KSAT account with ADI, how does ADI determine which email address to use for my users' primary email address?</a></li>\n<li><a href='#h_01HVM295PRNRGBZRCJKG0F5C7K'>What is KnowBe4's encryption method for data that is transferred between the ADI tool and KnowBe4 servers, and how does this encryption method protect my user data?</a></li>\n</ol>\n<h3 id='h_01HVM271VCS807FMA48QFSG94K'>1. What is the advantage of integrating Active Directory with my KSAT account?</h3>\n<p>You can use ADI to manage your user list in KSAT through Active Directory. The changes that you make to your AD account will affect your KSAT account at each sync. For example, if you archive a user in your AD account, the ADI sync will archive that user in your KSAT account.</p>\n<p>Additionally, you can specify which user information is automatically synced into your KSAT account. Then, you can use some of this information in user placeholders when you create phishing campaigns. For more information about user placeholders, see the <a href='https://support.knowbe4.com/hc/en-us/articles/6548790426771-User-Information-Placeholders-Guide'>User Information Placeholders Guide</a>.</p>\n<h3 id='h_01HVM277B9GA7Y19J24FDGZPKG'>2. Can I use ADI if I'm using Microsoft Azure?</h3>\n<p>Yes. To use ADI with Azure, follow the instructions in our <a href='https://support.knowbe4.com/hc/en-us/articles/360000849407' target='_blank' rel='noopener noreferrer'>Active Directory Integration (ADI) with Microsoft Entra Domain Services</a>\u00a0article.</p>\n<p>You can also set up Azure for Single Sign-On (SSO) with KSAT. For more information, see our <a href='https://support.knowbe4.com/hc/en-us/articles/229661667' target='_blank' rel='noopener noreferrer'>Enable SAML Single Sign-on (SSO) with Microsoft Entra ID</a> article.</p>\n<h3 id='h_01HVM27GYV5D41RHWTFJT7AAJH'>3. How do I change the initial login credentials that were used to set up ADI for my organization?</h3>\n<p>To change your ADI login credentials, follow the instructions below:</p>\n<ol>\n<li>From your computer, navigate to the <strong>Config</strong> folder: <strong>C:\\ProgramData\\KnowBe4\\ADI Sync\\Config</strong>\n</li>\n<li>Delete the <strong>.dat</strong> file from the folder.</li>\n<li>Open an elevated command prompt window.</li>\n<li>Navigate to the <strong>C:\\Program Files\\KnowBe4\\ADI Sync</strong> folder in the command prompt.</li>\n<li>Enter \"adisync.exe config\" into the command prompt.</li>\n<li>Enter your new credentials during the configuration.</li>\n</ol>\n<h3 id='h_01HVM27Y3KXRJSJQ7YMEQ9RCYK'>4. Will my existing phishing and training campaigns be impacted when I turn on ADI?</h3>\n<p>When you turn on ADI, your phishing campaigns will not be impacted. Training campaigns may be impacted, depending on the campaign settings. If the training campaign has the <strong>Enable automatic enrollment for new users </strong>option selected, then users who are added to your KSAT account will be enrolled in that training campaign. To learn how to enable this option, read our <a href='https://support.knowbe4.com/hc/en-us/articles/204948207'>Training Campaigns Guide</a>.</p>\n<h3 id='h_01HVM28RJ1W5H32STS3W4H5GFQ'>5. If I make changes to my KSAT account, will any changes happen in my Active Directory?</h3>\n<p>No. While the changes you make in Active Directory will affect your KSAT account, the changes you make in your KSAT account will <em>not</em> affect Active Directory.</p>\n<h3 id='h_01HVM28Z3EBXXHNR17KAQVS196'>6. If I have multiple domains in my AD account and I'm importing users into my KSAT account with ADI, how does ADI determine which email address to use for my users' primary email address?</h3>\n<p>If your users have multiple email addresses in Active Directory, ADI will use the <strong>reply-to</strong> email address as your users' primary email address.</p>\n<h3 id='h_01HVM295PRNRGBZRCJKG0F5C7K'>7. What is KnowBe4's encryption method for data that is transferred between the ADI tool and KnowBe4 servers, and how does this encryption method protect my user data?</h3>\n<p>We use HTTPS/SSL to encrypt the data that is transferred between ADI and KnowBe4 servers. Unless you enable SSL when you set up ADI, ADI uses LDAP/LDAPS to communicate between your domain controller and ADI. To enable SSL, you must already have LDAPS enabled.</p>\n<p>To learn how to enable LDAPS, see <a href='#h_01HVM29Q85N3K48R2N4HF7ANDG'>question 2</a> in the <a href='#h_01HFFDRG4GHY5MTV346PRNHAB3'>Getting Started</a> section below.</p>\n<h2 id='h_01HFFDRG4GHY5MTV346PRNHAB3'>Getting Started</h2>\n<p>For information to help you get started with ADI, see the questions below:</p>\n<ol>\n<li><a href='#h_01HVM29FZK9FQ619M327GZD2S4'>Can I disable user provisioning for specific users?</a></li>\n<li><a href='#h_01HVM29Q85N3K48R2N4HF7ANDG'>How do I enable LDAPS before syncing my Active Directory to KnowBe4? </a></li>\n<li><a href='#h_01HVM29XP1544MMC23894CSD11'>How can I add comments to my &lt;domain&gt;.conf file?</a></li>\n<li><a href='#h_01HVM2A9R67RQ6XDH8HDJDGTDG'>How do I manage my ADI if I have multiple source domains, but I want to sync everything to a single KSAT account? Or, how do I sync everything to one KSAT account if I have multiple domains and multiple domain controllers that do not communicate with each other?</a></li>\n<li><a href='#h_01HVM2AFC6632WY0Q4W8PR07JS'>I am a Managed Service Provider (MSP), and I have a multi-tenant Active Directory domain. How can I set up ADI for my clients?</a></li>\n<li><a href='#h_01HVM2AKW00FFTN2QZ3WVY36JX'>My AD users and groups are not organized how I'd like them to be organized in my KSAT account. What should I do?</a></li>\n<li><a href='#h_01HVM2AV7Y2ZYPBQRVYM7KSCW6'>My organization has a proxy or firewall in place. How can I connect to ADI successfully?</a></li>\n<li><a href='#h_01HVM2B1041T3QE3ACS8AAVCMX'>The ADIsync.conf file includes a post-URL where the information is being sent to. Is this post-URL secure, and what happens to the information?</a></li>\n<li><a href='#h_01HVM2BCKHQ31TSG0DS83EZHV0'>What happens if I enable the Show Group Domain setting in my KSAT Account Settings?</a></li>\n<li><a href='#h_01HVM2BKB3SRAG12TVC875H7N5'>My KSAT account is on test mode. What is test mode, and when should I turn it off?</a></li>\n</ol>\n<h3 id='h_01HVM29FZK9FQ619M327GZD2S4'>1. Can I disable user provisioning for specific users?</h3>\n<p>Yes. To disable user provisioning for an individual user, follow the instructions in the <a href='https://support.knowbe4.com/hc/en-us/articles/4402484699155-Disable-User-Provisioning#h_01HQNPP7C89GD3HDZQ34DP0WCT'>Disabling User Provisioning for a Single User</a> section of our <a href='https://support.knowbe4.com/hc/en-us/articles/4402484699155'>Disable User Provisioning</a> article. To disable user provisioning for a group of users, follow the instructions in the <a href='https://support.knowbe4.com/hc/en-us/articles/4402484699155-Disable-User-Provisioning#h_01HQNPP7C9AYQMVAWAGF8RRNEX'>Disabling User Provisioning for a Group of Users</a> section of our <a href='https://support.knowbe4.com/hc/en-us/articles/4402484699155'>How to Disable User Provisioning for a User</a> article.</p>\n<h3 id='h_01HVM29Q85N3K48R2N4HF7ANDG'>2. How do I enable LDAPS before syncing my Active Directory to KnowBe4?</h3>\n<p>To learn how to enable LDAPS, see TechNet's <a href='https://social.technet.microsoft.com/wiki/contents/articles/2980.ldap-over-ssl-ldaps-certificate.aspx' target='_blank' rel='noopener'>LDAP over SSL (LDAPS) Certificate</a> article and Microsoft's <a href='https://learn.microsoft.com/en-us/troubleshoot/windows-server/active-directory/enable-ldap-over-ssl-3rd-certification-authority' target='_blank' rel='noopener noreferrer'>Enable LDAP over SSL with a third-party certification authority</a> article. The articles also include instructions for testing the LDAPS connection so that you can verify if it was enabled successfully.</p>\n<div class='callout-remember'>\n<div>\n<strong>Important:</strong>If you enable LDAPS, you will need to set the <strong>use-ssl</strong> field to <strong>true</strong> in your <strong>&lt;domain&gt;.conf</strong> file.</div>\n</div>\n<h3 id='h_01HVM29XP1544MMC23894CSD11'>3. How can I add comments to my <strong>&lt;domain&gt;.conf</strong> file?</h3>\n<p>You can add comments to your <strong>&lt;domain&gt;.conf</strong> file by entering the hash special character (#). However, you cannot add a comment at the beginning of a line or in the middle of a line.</p>\n<p>For an example of a comment in a <strong>&lt;domain&gt;.conf</strong> file, see the section below:</p>\n<div class='code-block'>\n<button class='copy-btn' data-target='text1'>Copy</button>\n<div id='text1'>\n<pre>[sync.users]\nincludedOUs = [\"Users\", \"Managers\", \"East Coast/Managers\"]\n#I am commenting on my .conf file.\nexcludedOUs = [\"\"]\nincludedGroups = [\"Tech\",\"KnowBe4 Group\"]\nexcludedGroups = [\"\"]\nincludedUsers = [\"\"]\nexcludedUsers = [\"\"]</pre>\n</div>\n</div>\n<h3 id='h_01HVM2A9R67RQ6XDH8HDJDGTDG'>4. How do I manage my ADI if I have multiple source domains, but I want to sync everything to a single KSAT account? Or, how do I sync everything to one KSAT account if I have multiple domains and multiple domain controllers that do not communicate with each other?</h3>\n<p>If your users are split between multiple source domains, you will need to set up a configuration for each domain that you want to sync to your KSAT account. To learn how to set up a configuration for each domain, see the <a href='https://support.knowbe4.com/hc/en-us/articles/6151635869843-Active-Directory-Integration-ADI-Advanced-Configuration-Guide#h_01HQNNGRBBT031SPXPVFR6S0J1'>Support for Multiple Domain Sources </a>section of our <a href='https://support.knowbe4.com/hc/en-us/articles/6151635869843'>Active Directory Integration (ADI) Advanced Configuration Guide</a>.</p>\n<h3 id='h_01HVM2AFC6632WY0Q4W8PR07JS'>5. I am a Managed Service Provider (MSP), and I have a multi-tenant Active Directory domain. How can I set up ADI for my clients?</h3>\n<p>You will need to install ADI for each KSAT account on a separate machine for each domain that you want to sync with. This will ensure a successful installation.</p>\n<h3 id='h_01HVM2AKW00FFTN2QZ3WVY36JX'>6. My AD users and groups are not organized how I'd like them to be organized in my KSAT account. What should I do?</h3>\n<p>In Active Directory, you can create a new organizational unit, or OU, and add groups that are named after your KSAT groups to the OU. For example, if you have a KSAT group that is named <strong>Group 1</strong>, you could create an AD group that is named <strong>KB4-Group 1</strong>. Then, you could add the AD users or groups that belong to that KSAT group to the <strong>KB4-Group 1</strong> group. When you finish setting up this group, you can use this OU for the <strong>[sync.groups]</strong> or <strong>[sync.users]</strong> section of your <strong>&lt;domain&gt;.conf</strong> file. This method may be preferable because you will not need to change the existing groups in your AD account.</p>\n<div class='callout-remember'>\n<div>\n<strong>Important:</strong>ADI does not support nested groups, which are groups that are members of other groups. However, ADI does support nested users, which are users who are members of nested groups.</div>\n</div>\n<h3 id='h_01HVM2AV7Y2ZYPBQRVYM7KSCW6'>7. My organization has a proxy or firewall in place. How can I connect to ADI successfully?</h3>\n<p>You can integrate with Active Directory even if you're using a firewall or proxy. For more information, see our <a href='https://support.knowbe4.com/hc/en-us/articles/115001905307' target='_blank' rel='noopener noreferrer'>Configure the ADI Sync Tool to Connect Through a Proxy</a> article.</p>\n<h3 id='h_01HVM2B1041T3QE3ACS8AAVCMX'>8. Where is my information being sent when using ADI sync?</h3>\n<p>When you import users with a CSV file, the <strong>users.json</strong> file is sent directly to the same servers that process imports. No other information is sent to the servers for processing. We intentionally leave the configuration data local to your system.</p>\n<h3 id='h_01HVM2BCKHQ31TSG0DS83EZHV0'>9. What happens if I enable the <strong>Show Group Domain</strong> setting in my KSAT <strong>Account Settings</strong>?</h3>\n<p>When you enable the <strong>Show Group Domain</strong> setting, ADI will add your domain name to your AD-synced KSAT groups. For example, a KSAT group named \"Accounting\" that is synced with the domain \"knowbe4.com\" would be named \"knowbe4.com\\Accounting\". If your users are split between multiple domain sources, this setting can help you organize your users.</p>\n<h3 id='h_01HVM2BKB3SRAG12TVC875H7N5'>10. My KSAT account is on test mode. What is test mode, and when should I turn it off?</h3>\n<p>After you set up ADI, your KSAT account will be on test mode until you turn it off. It's important that you leave your account on test mode so that you can preview what will happen when you sync your KSAT account with Active Directory. To view this preview, log in to your KSAT account, and navigate to <strong>Users</strong> &gt; <strong>Provisioning</strong>. From the <strong>Provisioning </strong>tab, you can view the changes that will be made after you enable ADI. Then, you can resolve any potential issues without affecting the users that you have in your KSAT account.</p>\n<p>We recommend that you wait until you are fully satisfied with the preview before you turn off test mode. You can find the <strong>Test Mode</strong> setting in the <strong>User Provisioning</strong> section of your <strong>Account Settings</strong>.</p>\n<h2 id='h_01HFFDRG4G16HCSHSR21QYACDW'>Syncing Information</h2>\n<p>For syncing information about ADI, see the questions below:</p>\n<ol>\n<li><a href='#h_01HVM2CD6WATYT5A9NYA3DK284'>Can I change how often my AD information syncs to my KSAT account?</a></li>\n<li><a href='#h_01HVM2CM78WZYBME7MD7G7Q4VX'>Can I limit what data syncs to my KSAT account from Active Directory? How do I change which Active Directory fields ADI pulls data from?</a></li>\n<li><a href='#h_01HVM2CW4DHA7CKYWH2HQRZQYQ'>How do I sync my AD groups with my KSAT groups?</a></li>\n<li><a href='#h_01HVM2D27GSAWPTZDE7W2PFRNQ'>How often can I send a sync request for ADI API?</a></li>\n<li><a href='#h_01HVM2D7M2264J21F88PADFHYZ'>How can I exclude expired AD accounts from my ADI sync?</a></li>\n<li><a href='#h_01HVM2DQ1CGYXFW8DZAGY8A1B0'>How can I exclude AD accounts that haven't logged on in the past XX number of days in my sync?</a></li>\n<li><a href='#h_01HVM2E0AA6YMJTN9EYSMMADEK'>If I add a user to a KSAT group and the user is not in that AD group, will the user be removed from the KSAT group during the next sync?</a></li>\n<li><a href='#h_01HVM2EQ7M5CGWES36JHZK3RED'>Many user accounts in my Active Directory are disabled. Will these user accounts sync to my KSAT account?</a></li>\n<li><a href='#h_01HVM2EWRWBAFA8D9624HJWTYX'>Why can't I sync contact objects with ADI?</a></li>\n<li><a href='#h_01HVM2F1ZCYF2C78929JX9XGVM'>Will my users' passwords sync to my KSAT account?</a></li>\n<li><a href='#h_01HVM2F7TZS2DPHEJBDBW3EHJV'>I'm using Carbon Black Cloud and am having issues with my KnowBe4 ADI. What should I do?</a></li>\n</ol>\n<h3 id='h_01HVM2CD6WATYT5A9NYA3DK284'>1. Can I change how often my AD information syncs to my KSAT account?</h3>\n<p>Yes. By default, the ADI sync service will sync your AD account to your KSAT account every six hours. If you need to force the sync to happen immediately, you can restart the ADI sync service. If you want to change the sync interval, you can change the information in the <strong>sync-interval</strong> field of your <strong>adisync.conf</strong> file.</p>\n<div class='callout-note'>\n<div>\n<strong>Note:</strong>The minimum sync interval is six hours (6h0m0s).</div>\n</div>\n<h3 id='h_01HVM2CM78WZYBME7MD7G7Q4VX'>2. Can I limit what data syncs to my KSAT account from Active Directory? How do I change which Active Directory fields ADI pulls data from?</h3>\n<p>Yes, you can limit the data that syncs to your KSAT account. In your <strong>&lt;domain&gt;.conf</strong> file, you will see an area with the settings below:</p>\n<div class='code-block'>\n<button class='copy-btn' data-target='text2'>Copy</button>\n<div id='text2'>\n<pre>[sync.fields]\ncomment = \"\"\ncustom-date-1 = \"\"\ncustom-date-2 = \"\"\ncustom-field-1 = \"\"\ncustom-field-2 = \"\"\ncustom-field-3 = \"\"\ncustom-field-4 = \"\"\ndepartment = \"department\"\ndivision = \"\"\nemployee-number = \"employeeNumber\"\nemployee-start-date = \"whenCreated\"\nfirst-name = \"givenName\"\nlast-name = \"\"\nlocation = \"physicalDeliveryOfficeName\"\nmanager = \"manager\"\nmobile-number = \"\"\norganization = \"o\"\nphone-number = \"telephoneNumber\"\ntitle = \"employeeNumber\"</pre>\n</div>\n</div>\n<p>If you don't want ADI to pull data for a field, you can leave the field blank or delete the field that is listed between the double quotation marks. Removing fields will not overwrite the existing data for those fields. If you want ADI to pull data from a different field, you can change the field between the double quotation marks to a different field where your user information exists. Fields are case-sensitive and must match the attribute name in your AD.</p>\n<div class='callout-note'>\n<div>\n<strong>Note:</strong>The <strong>mobile-number</strong> field in your <strong>&lt;domain&gt;.conf</strong> file will be blank because there is not a <strong>mobile-number</strong> field in Active Directory. However, you can enter the name of another field you want to pull the <strong>mobile-number</strong> data from. The two <strong>custom-date</strong> fields in your <strong>&lt;domain&gt;.conf</strong> file must follow the mm/dd/yyyy format.</div>\n</div>\n<h3 id='h_01HVM2CW4DHA7CKYWH2HQRZQYQ'>3. How do I sync my AD groups with my KSAT groups?</h3>\n<p>The groups that sync to KSAT are based on security groups and distribution groups in Active Directory. If you want to sync AD groups with your KSAT account, you can add those groups to the <strong>[sync.groups]</strong> section of your <strong>&lt;domain&gt;.conf</strong> file. To add AD groups to your <strong>&lt;domain&gt;.conf </strong>file, you can use one of the methods below:</p>\n<ul>\n<li>If the groups you want to sync are in one or more OUs, enter the OUs into the <strong>includedOUs</strong> field of your <strong>&lt;domain&gt;.conf </strong>file.</li>\n<li>If you want to sync specific groups, enter the groups into the <strong>includedGroups</strong> field of your <strong>&lt;domain&gt;.conf </strong>file.</li>\n</ul>\n<div class='callout-remember'>\n<div>\n<strong>Important:</strong>The users who are members of the groups included in the <strong>[sync.groups]</strong> section must also be included in the <strong>[sync.users]</strong> section of your <strong>&lt;domain&gt;.conf</strong> file. For example, if your AD group has 100 members and only 85 of those members are included in the <strong>[sync.users]</strong> field, only the 85 users will be added to the group in your KSAT account.</div>\n</div>\n<p>For more information about syncing users and groups, see the <a href='https://support.knowbe4.com/hc/en-us/articles/228373888-Active-Directory-Integration-ADI-Configuration-Guide#h_01HAA5E9HGZ9KWSGRKAHBN5AMC'>Defining Which OUs, Groups, and Users to Sync</a> section of our <a href='https://support.knowbe4.com/hc/en-us/articles/228373888'>Active Directory Integration (ADI) Configuration Guide</a>.</p>\n<h3 id='h_01HVM2D27GSAWPTZDE7W2PFRNQ'>4. How often can I send a sync request for ADI API?</h3>\n<p>If test mode is enabled for your account, you can start and stop the ADI service as frequently as you'd like. Once you have turned off test mode, your ADI API sync request frequency is limited to once every six hours.</p>\n<h3 id='h_01HVM2D7M2264J21F88PADFHYZ'>5. How can I exclude expired AD accounts from my ADI sync?</h3>\n<p>To exclude AD accounts from syncing to your KSAT account based on the expiration date of the accounts, follow the steps below:</p>\n<ol>\n<li>Identify a date which expired accounts will be excluded before or on.</li>\n<li>Convert the date to Integer8 syntax.\n<ul>\n<li>If you need help converting the date to Integer8 syntax, you can use the conversion tools that are linked below:\n<p><a href='https://www.epochconverter.com/ldap' target='_blank' rel='noopener'>LDAP, Active Directory &amp; Filetime Timestamp Converter</a></p>\n<p><a href='https://www.silisoftware.com/tools/date.php' target='_blank' rel='noopener'>Date format converter</a></p>\n</li>\n<li>\n<p>For an example of Integer8 syntax, see the table below:</p>\n<table style='margin-block-start: 1.5rem;'>\n<thead>\n<tr>\n<th scope='col'>Standard Format</th>\n<th scope='col'>Integer 8 Syntax/th</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>5/21/2017 10:41:52 AM Eastern Time (ET)</td>\n<td>131398513120000000</td>\n</tr>\n</tbody>\n</table>\n</li>\n</ul>\n</li>\n<li>Add the converted date to the <strong>filter_users_by_ou</strong> and <strong>filter_users_by_group</strong> fields in your <strong>&lt;domain&gt;.conf</strong> file. For example, see the section below, where XXXXXXXXXXXXXXXXXX represents the date in Integer8 syntax:\n<div class='code-block'>\n<button class='copy-btn' data-target='text3'>Copy</button>\n<div id='text3'>\n<pre>filter_users_by_ou =\n\"(&amp;(|(accountExpires&gt;=XXXXXXXXXXXXXXXXXX)(accountExpires=0))(objectCategory=person)(objectClass=user)(mail=*)(!(userAccountControl:1.2.840.113556.1.4.803:=2))(!(cn=HealthMailbox*))(!(cn=SystemMailbox*)))\"\"\nfilter_users_by_group =\n\"(&amp;(|(accountExpires&gt;=XXXXXXXXXXXXXXXXXX)(accountExpires=0))(objectCategory=person)(objectClass=user)(mail=*)(!(userAccountControl:1.2.840.113556.1.4.803:=2))(!(cn=HealthMailbox*))(!(cn=SystemMailbox*))(|{DYNAMIC_CONTENT}))\"</pre>\n</div>\n</div>\n</li>\n</ol>\n<div class='callout-note'>\n<div>\n<strong>Note:</strong>If you want to continuously exclude expired accounts, you will need to manually update the date in the <strong>&lt;domain&gt;.conf</strong> file. For example, if you initially entered 11/20/2021 for the date and more accounts have expired since then, you will need to update the date in the <strong>&lt;domain&gt;.conf</strong> file to account for the newly expired accounts.</div>\n</div>\n<h3 id='h_01HVM2DQ1CGYXFW8DZAGY8A1B0'>6. How can I exclude AD accounts that haven't logged on in the past XX number of days in my sync?</h3>\n<p>You can exclude AD user accounts from syncing to your KSAT account based on the <strong>lastLogonTimeStamp</strong> AD account attribute.</p>\n<p>To exclude users from your sync based on a last login date, follow the steps below:</p>\n<ol>\n<li>Identify a date that you want to use as the last login date limit.</li>\n<li>Convert the date to Integer8 syntax.\n<ul>\n<li>If you need help converting the date to Integer8 syntax, you can use the conversion tools that are linked below:\n<p><a href='https://www.epochconverter.com/ldap' target='_blank' rel='noopener'>LDAP, Active Directory &amp; Filetime Timestamp Converter</a></p>\n<p><a href='https://www.silisoftware.com/tools/date.php' target='_blank' rel='noopener'>Date format converter</a></p>\n</li>\n<li>\n<p>For an example of Integer8 syntax, see the table below:</p>\n<table style='margin-block-start: 1.5rem;'>\n<thead>\n<tr>\n<th scope='col'>Standard Format</th>\n<th scope='col'>Integer 8 Syntax</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>5/21/2017 10:41:52 AM Eastern Time (ET)</td>\n<td>131398513120000000</td>\n</tr>\n</tbody>\n</table>\n</li>\n</ul>\n</li>\n<li>Add the converted date to the <strong>filter_users_by_ou</strong> and <strong>filter_users_by_group</strong> fields in your <strong>&lt;domain&gt;.conf</strong> file. For example, see the section below, where XXXXXXXXXXXXXXXXXX represents the timestamp in Integer8 syntax:\n<div class='code-block'>\n<button class='copy-btn' data-target='text4'>Copy</button>\n<div id='text4'>\n<pre>filter_users_by_ou =\n\"(&amp;(lastLogonTimeStamp&gt;=XXXXXXXXXXXXXXXXXX)(objectCategory=person)(objectClass=user)(mail=*)(!(userAccountControl:1.2.840.113556.1.4.803:=2))(!(cn=HealthMailbox*))(!(cn=SystemMailbox*)))\"\nfilter_users_by_group =\n\"(&amp;(lastLogonTimeStamp&gt;=XXXXXXXXXXXXXXXXXX)(objectCategory=person)(objectClass=user)(mail=*)(!(userAccountControl:1.2.840.113556.1.4.803:=2))(!(cn=HealthMailbox*))(!(cn=SystemMailbox*))(|{DYNAMIC_CONTENT}))\"</pre>\n</div>\n</div>\n</li>\n</ol>\n<div class='callout-note'>\n<div>\n<strong>Note:</strong>You will need to update this timestamp often. For example, if you want to exclude accounts that haven't logged in for 90 days, you will need to update the timestamp every 90 days so that the data is 90 days before the current date.</div>\n</div>\n<h3 id='h_01HVM2E0AA6YMJTN9EYSMMADEK'>7. If I add a user to a KSAT group and the user is not in that AD group, will the user be removed from the KSAT group during the next sync?</h3>\n<p>Yes, if the group is synced with your AD account. For example, if you add a user to a KSAT group that is not synced with your AD account, the user will remain in the KSAT group unless you remove the user. You can add both AD-managed and non AD-managed users to the KSAT group. However, if you sync the KSAT group with an AD group, the group will be managed by AD for AD-managed users. You can also add non AD-managed users to AD-managed groups, but the AD sync won\u2019t affect those users.</p>\n<h3 id='h_01HVM2EQ7M5CGWES36JHZK3RED'>8. Many user accounts in my Active Directory are disabled. Will these user accounts sync to my KSAT account?</h3>\n<p>No, users with disabled AD accounts will not sync to your KSAT account. However, if you want to sync disabled manager accounts, you can modify the LDAP filters in the <strong>&lt;domain&gt;.conf </strong>file.</p>\n<h3 id='h_01HVM2EWRWBAFA8D9624HJWTYX'>9. Why can't I sync contact objects with ADI?</h3>\n<p>ADI can only sync users or groups that are members of your Active Directory domain. Contact objects typically represent external users. Often, the primary purpose of contact objects is to appear in your organization's email address book so your users can send emails to external users. Contact objects are not part of your domain, and you cannot assign permissions to them.</p>\n<h3 id='h_01HVM2F1ZCYF2C78929JX9XGVM'>10. Will my users' passwords sync to my KSAT account?</h3>\n<p>No. ADI does not query your AD passwords, so no passwords will sync to your KSAT account.</p>\n<h3 id='h_01HVM2F7TZS2DPHEJBDBW3EHJV'>11. I'm using Carbon Black Cloud and am having issues with my KnowBe4 ADI. What should I do?</h3>\n<p>If you use Carbon Black Cloud and are having issues with our ADI, please see <a href='https://knowledge.broadcom.com/external/article/289707/carbon-black-cloud-unable-to-start-knowb.html' target='_blank' rel='noopener noreferrer'>this article from Carbon Black Cloud</a>.</p>\n<h2 id='h_01HFFDRG4G52EXJ76B22AYMPP4'>Troubleshooting</h2>\n<p>For troubleshooting information about ADI, see the questions below:</p>\n<ol>\n<li><a href='#h_01HVM2FFK5CA6RR5XGXBCWA26D'>How do I enable detailed logging to see which errors may be impacting my import?</a></li>\n<li><a href='#h_01HVM2FKZ6M1GT390T4HFE4G8E'>I am having difficulties with including or excluding specific users and groups from the sync. How do I fix this issue?</a></li>\n<li><a href='#h_01HVM2FV082HPT7FAE252QF64Z'> I'm getting a \"No valid email addresses\" error next to several users. What does this error mean?</a></li>\n<li><a href='#h_01HVM2GWQJRYYT7H9P62SJCDAH'>I don't have edit permissions to save my &lt;domain&gt;.conf file, so I can't configure my LDAP filter. What should I do?</a></li>\n<li><a href='#h_01HVM2HFQMP3EZM2D09V4C8DG0'>I'm getting a \"Not enough space\" error after an ADI sync attempt. How can I resolve this error?</a></li>\n<li><a href='#h_01HVM2HV594178PTC267KKRCE5'>Is there a file that I can download that shows sync errors and details?</a></li>\n<li><a href='#h_01HVM2J1BGCQJA65WKP2Z5V8Y6'>Why weren't my OUs added to KSAT as groups during my ADI sync?</a></li>\n<li><a href='#h_01HVM2J6YN6ZDK600GKK6SAHHG'>Why can't the ADI tool find any email addresses for my users?</a></li>\n</ol>\n<h3 id='h_01HVM2FFK5CA6RR5XGXBCWA26D'>1. How do I enable detailed logging to see which errors may be impacting my import?</h3>\n<p>To enable detailed logging, follow the steps below:</p>\n<ol>\n<li>Open the installation folder: <strong>C:\\Program Files\\KnowBe4\\ADI Sync</strong>.</li>\n<li>Double-click the <strong>support_enable_logging.bat</strong> file.</li>\n<li>In the pop-up window that opens, click <strong>Yes</strong> to allow the Troubleshooter app to make changes to your device.</li>\n<li>When the <strong>Command Prompt</strong> window displays the <strong>Press any key to continue...</strong> message, press a key on your keyboard.</li>\n</ol>\n<p>The next time the sync occurs, you will be able to see more detailed information about what actions may have occurred to cause errors with your sync. To view your error logs, navigate to the <strong>C:\\ProgramData\\KnowBe4\\ADI Sync\\DebugLogs</strong> folder.</p>\n<p>If you continue to experience issues with your ADI sync, please contact our <a href='https://support.knowbe4.com/hc/en-us/requests/new'>support team</a>.</p>\n<h3 id='h_01HVM2FKZ6M1GT390T4HFE4G8E'>2. I am having difficulties with including or excluding specific users and groups from the sync. How do I fix this issue?</h3>\n<p>This issue may occur because the person who is attempting to sync is not a domain admin. Domain admins will typically have the necessary permissions for including and excluding users and groups, but you can use any account that has permission to query all data. If you do not have access to an account with the necessary permissions, you can create a service account with the <strong>Read all user information </strong>and <strong>Read all inetOrgPerson information</strong> permissions. To learn how to create an ADI service account, see our <a href='https://support.knowbe4.com/hc/en-us/articles/236017387'>Create an ADI Service Account in Active Directory</a> article.</p>\n<p>If you need to change the user that the ADI sync service is using to connect to your domain controller, follow the instructions below:</p>\n<ol>\n<li>Navigate to your <strong>C:\\ProgramData\\KnowBe4\\ADI Sync\\Config</strong> folder.</li>\n<li>Delete the <strong>&lt;domain&gt;.dat</strong> file from the folder.</li>\n<li>Open an elevated command prompt window.</li>\n<li>Navigate to your<strong> C:\\Program Files\\KnowBe4\\ADI Sync</strong> folder in the command prompt.</li>\n<li>Enter \"adisync.exe config\" into the command prompt.</li>\n</ol>\n<h3 id='h_01HVM2FV082HPT7FAE252QF64Z'>3. I'm getting a \"No valid email addresses\" error next to several users. What does this error mean?</h3>\n<p>This error typically occurs if all of the domains in your Active Directory are not added to your KSAT account. To learn how to add domains to your KSAT account, see our <a href='https://support.knowbe4.com/hc/en-us/articles/360013430414'>Add and Verify Domains</a> article. After you add all of your domains and the next sync occurs, the \"No valid email addresses\" error should be resolved.</p>\n<p><a data-fancybox='single' data-src='https://s3.amazonaws.com/helpimg/ADI/NoValidEmail.png'><img src='https://s3.amazonaws.com/helpimg/ADI/NoValidEmail.png' alt=' '></a></p>\n<p>If you need further assistance, contact our <a href='https://support.knowbe4.com/hc/en-us/requests/new'>support team</a>.</p>\n<h3 id='h_01HVM2GWQJRYYT7H9P62SJCDAH'>4. I don't have edit permissions to save my <strong>&lt;domain&gt;.conf</strong> file, so I can't configure my LDAP filter. What should I do?</h3>\n<p>If you are unable to give yourself edit permissions, request that your IT team or administrator give you permission to edit the<strong> ADIsync</strong> folder.</p>\n<p>To give yourself edit permissions for the <strong>ADISync</strong> folder, follow the steps below:</p>\n<ol>\n<li>Navigate to your <strong>ADIsync</strong> folder (Program Files/KnowBe4\\ADIsync).\n<p><a data-fancybox='single' data-src='https://helpimg.s3.amazonaws.com/ADI/ADIConfAnnotated.png'> <img src='https://helpimg.s3.amazonaws.com/ADI/ADIConfAnnotated.png' alt=''> </a></p>\n</li>\n<li>Right-click the <strong>ADIsync</strong> folder, and select <strong>Properties</strong>.\n<p><a data-fancybox='single' data-src='https://helpimg.s3.amazonaws.com/ADI/ADIPropertiesAnnotated.png'> <img src='https://helpimg.s3.amazonaws.com/ADI/ADIPropertiesAnnotated.png' alt=''> </a></p>\n</li>\n<li>Select the <strong>Security</strong> tab.</li>\n<li>Select the <strong>Edit</strong> button.\n<p><a data-fancybox='single' data-src='https://helpimg.s3.amazonaws.com/ADI/ADISecurityAnnotated.png'> <img src='https://helpimg.s3.amazonaws.com/ADI/ADISecurityAnnotated.png' alt=''> </a></p>\n</li>\n<li>Select the <strong>Add </strong>button.\n<p><a data-fancybox='single' data-src='https://helpimg.s3.amazonaws.com/ADI/ADIAddPermissionsAnnotated.png'> <img src='https://helpimg.s3.amazonaws.com/ADI/ADIAddPermissionsAnnotated.png' alt=''> </a></p>\n</li>\n<li>Enter your username, and select the <strong>Check Names</strong> button.\n<p><a data-fancybox='single' data-src='https://helpimg.s3.amazonaws.com/ADI/ADICheckNamesAnnotated.png'> <img src='https://helpimg.s3.amazonaws.com/ADI/ADICheckNamesAnnotated.png' alt=''> </a></p>\n</li>\n<li>If your account is showing correctly after clicking <strong>Check Names</strong>, select the <strong>OK</strong> button.\n<p><a data-fancybox='single' data-src='https://helpimg.s3.amazonaws.com/ADI/ADICheckNamesOKAnnotated.png'> <img src='https://helpimg.s3.amazonaws.com/ADI/ADICheckNamesOKAnnotated.png' alt=''> </a></p>\n</li>\n<li>Under your username, select the check box next to <strong>Full control</strong> to give yourself full permissions for the <strong>ADIsync</strong> folder.\n<p><a data-fancybox='single' data-src='https://helpimg.s3.amazonaws.com/ADI/ADIAllowAnnotated.png'> <img src='https://helpimg.s3.amazonaws.com/ADI/ADIAllowAnnotated.png' alt=''> </a></p>\n</li>\n<li>In the <strong>ADI Sync Properties</strong> window, select the <strong>OK</strong> button. Now, you should have the permissions you need to edit the <strong>&lt;domain&gt;.conf</strong> file.</li>\n</ol>\n<h3 id='h_01HVM2HFQMP3EZM2D09V4C8DG0'>5. I'm getting a \"No users found for synchronization\" error after an ADI sync attempt. How can I fix this?</h3>\n<p>This error typically occurs if you did not specify the location from which ADI can pull your users. You can specify this location in the <strong>[sync.users]</strong> section of your <strong>&lt;domain&gt;.conf</strong> file. For more information, see the <a href='https://support.knowbe4.com/hc/en-us/articles/228373888-Active-Directory-Integration-ADI-Configuration-Guide#h_01HAA5E9HGZ9KWSGRKAHBN5AMC'>Defining Which OUs, Groups, and Users to Sync</a> section of our <a href='https://support.knowbe4.com/hc/en-us/articles/228373888'>Active Directory Integration (ADI) Configuration Guide</a>.</p>\n<div class='callout-note'>\n<div>\n<strong>Note:</strong>If your users are split between multiple domains, you will need to verify that this location is specified in the <strong>[sync.users]</strong> section of each domain's <strong>&lt;domain&gt;.conf</strong> file.</div>\n</div>\n<p>If you need further assistance, contact our <a href='https://support.knowbe4.com/hc/en-us/requests/new'>support team</a>.</p>\n<h3 id='h_01HVM2HV594178PTC267KKRCE5'>6. Is there a file that I can download that shows sync errors and details?</h3>\n<p>Yes. You can download a text file that includes information about all of the sync changes and detailed information about any errors. You can download this file from the sync's <strong>Details </strong>page. To navigate to this file, follow the instructions below:</p>\n<ol>\n<li>From your KSAT navigation panel, navigate to <strong>Users </strong>&gt; <strong>Provisioning</strong>.</li>\n<li>Select the <strong>Details</strong> button that is in the same row as the sync.</li>\n<li>Near the top-right corner of the page, click the <strong>Sync and Error Details</strong> link.</li>\n</ol>\n<p>For more information about the <strong>Details</strong> page, see our <a href='https://support.knowbe4.com/hc/en-us/articles/4408867460371'>Provisioning Subtab Guide</a>.</p>\n<h3 id='h_01HVM2J1BGCQJA65WKP2Z5V8Y6'>7. Why weren't my OUs added to KSAT as groups during my ADI sync?</h3>\n<p>OUs cannot be added as groups to KSAT. Only security and distribution groups will be added or synced as groups in KSAT. When you include OUs in the <strong>[sync.groups]</strong> section of your <strong>&lt;domain.conf&gt;</strong> file, only groups that are included in that OU will be added and synced to KSAT.</p>\n<h3 id='h_01HVM2J6YN6ZDK600GKK6SAHHG'>8. Why can't the ADI tool find any email addresses for my users?</h3>\n<p>ADI finds your users' email addresses in the <strong>proxyAddresses</strong> field of your Active Directory. If you are using a mail server other than Microsoft Exchange or Microsoft 365, the <strong>proxyAddresses</strong> field is most likely blank.</p>\n<p>To solve this issue, you will need to change the field where KSAT pulls email addresses from in your Active Directory, such as the <strong>mail</strong> attribute field. To learn how to change this field, see tour <a href='https://support.knowbe4.com/hc/en-us/articles/228373888'>Active Directory Integration (ADI) Configuration Guide</a>.</p>\n<p>If you need further assistance, contact our <a href='https://support.knowbe4.com/hc/en-us/requests/new'>support team</a>.</p>",
    "user_segment_ids": [],
    "source_url": "https://support.knowbe4.com/hc/en-us/articles/228466847-FAQ-Active-Directory-Integration-ADI"
  }
}</pre>
</body>
</html>
